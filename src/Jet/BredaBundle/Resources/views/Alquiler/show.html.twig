{% extends 'JetBredaBundle::layoutAdmin.html.twig'%}

{% set active = "alquiler"%}

{% block container%}
{% if entity.destacado %}
<div class="row">
<div class="alert alert-warning span2">
   <b class="icon  icon-star"></b> <strong>ALQUILER DESTADO!</strong>
</div>
</div>
{% endif %}
<h1>Alquiler en {{ entity.direccion }}, {{ entity.poblacion }}</h1>

<div class="row">
    <div class="span4 well">
        <h3>{{ entity.tipo }} en {{ entity.poblacion }}</h3>
        <h4>{{ entity.direccion }}</h4> <h6>{{ entity.postal }}</h6>
        <hr class="soften">
        <h5>Descripción</h5>
        {{ entity.descipcion|raw }}
    </div>

    <div class="span4 well">
        <h5>Parámetros adicionales</h5>
        {{ entity.extra|raw}}
    </div>
</div>

<div class="row">
    *Recuerda que para cambiar la dirección, puedes editar la información del inmueble
    <div id="map_canvas"></div>
</div>
<div class="row" style="margin-top: 40px;">

    <div class="span8">
        <h2>Galería</h2>
        {% if entity.fotos is not empty %}
        {% for foto in entity.fotos %}
        <div class="span2 well">
            <p><img src="{{ asset(foto.webPath) }}" title="{{ entity.poblacion }}" width="200px"></p>

            <p><small>{{ foto.descripcion }}</small></p>
            <p><a href="{{ path('admin_alquiler_deleteFoto', {'id': foto.id})}}" class="btn btn-danger">Eliminar imágen</a></p>
        </div>
        {% endfor %}
        {% else %}
        <div class="alert alert-info">
            <strong>Información!</strong> No has añadido ninguna foto
        </div>
        {% endif %}
    </div>

</div>

<div class="row" style="margin-top: 20px; margin-bottom: 20px">
    <div class="span8">
        <legend>Añadir imágen</legend>
        <form class="form-horizontal" method="post" {{ form_enctype(fotoForm) }}>
          <div class="control-group">
            <label class="control-label" for="jet_bredabundle_fototype_descripcion">Descripción</label>
            <div class="controls">
              {{ form_widget(fotoForm.descripcion)}}
            </div>
          </div>
          <div class="control-group">
            <label class="control-label" for="jet_bredabundle_fototype_file">Nueva imágen</label>
            <div class="controls">
              {{ form_widget(fotoForm.file)}}
            </div>
          </div>
          <div class="control-group">
            <div class="controls">

                <input type="submit" class="btn btn-success" value="Añadir imágen">
            </div>
          </div>
        </form>


    </div>
</div>

<form action="{{ path('admin_alquiler_delete', { 'id': entity.id }) }}" method="post" style="padding-bottom: 10px">
    <a href="{{ path('admin_alquiler') }}" class="btn btn-block pull-left">
        Volver a la lista
    </a>

    <a href="{{ path('admin_alquiler_edit', { 'id': entity.id }) }}" class="btn btn-info btn-block pull-left" style="margin-left: 10px ; margin-bottom: 10px" >
        Editar
    </a>
    {{ form_widget(delete_form) }}
    <button type="submit" class="btn btn-danger pull-left "  style="margin-left: 10px">Borrar</button>
</form>

<div style="clear: both; margin-top:"></div>




        {% endblock %}

{% block extra %}
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&language=es"></script>
    <script src="{{  asset('bundles/jetbreda/js/gmap3.min.js') }}"></script>

    <script type="text/javascript">
        $(function() {
            $("#map_canvas").width("900px").height("350px").gmap3({
                marker:{
                    address: "{{ entity.direccion }}, {{  entity.poblacion }}"
                },
                map:{
                    options:{
                        zoom: 15
                    }
                }
            });
        });
    </script>

{% endblock %}